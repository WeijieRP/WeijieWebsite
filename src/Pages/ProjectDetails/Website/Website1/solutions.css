/* ===== SOLUTION SECTION STAGE ===== */
.sol-stage {
  position: relative;
  isolation: isolate;
  padding: clamp(40px, 6vw, 96px) clamp(16px, 5vw, 6vw);
  overflow: visible;
  min-height: 100vh;
  color: var(--body-ink); /* from global */
}

/* keep everything crisp (no blur, no strange blends) */
.sol-stage .sol-grid,
.sol-stage .sol-copy,
.sol-stage .sol-panel,
.sol-stage .sol-visual,
.sol-stage .sol-visual *,
.sol-stage .sol-title,
.sol-stage .sol-desc,
.sol-stage .sol-eyebrow {
  -webkit-backdrop-filter: none !important;
  backdrop-filter: none !important;
  filter: none !important;
  mix-blend-mode: normal !important;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ===== BACKDROP (full width) ===== */
.sol-backdrop {
  position: absolute;
  inset: -2% 0;
  background-size: cover;
  background-position: 50% 50%;
  transform: scale(1.06);
  filter: brightness(0.9) contrast(1.05) saturate(1.05);
  z-index: 0;
}

.sol-backdrop-overlay {
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;
  background:
    radial-gradient(
      70rem 42rem at 50% 8%,
      rgba(126, 141, 254, 0.1),
      transparent 60%
    ),
    linear-gradient(
      180deg,
      rgba(0, 0, 0, 0.46),
      rgba(0, 0, 0, 0.18) 40%,
      rgba(0, 0, 0, 0.55)
    );
}

/* ===== GRID ===== */
.sol-grid {
  position: relative;
  z-index: 2;
  display: grid;
  grid-template-columns: 1.25fr 1fr;
  gap: clamp(20px, 4vw, 48px);
  align-items: stretch;
}

/* ===== LEFT COPY WRAPPER ===== */
.sol-copy {
  align-self: center;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  text-align: left;
}

.sol-eyebrow {
  margin: 0 0 10px;
  letter-spacing: 0.28em;
  text-transform: uppercase;
  font-size: clamp(10px, 1.1vw, 12px);
  color: var(--body-muted);
  opacity: 0.95;
  text-shadow: none !important;
}

/* ===== GLASS PANEL around title + text (NO text shadow) ===== */
.sol-panel {
  width: 100%;
  margin: 0;
  padding: clamp(16px, 2.2vw, 22px) clamp(18px, 3.2vw, 32px);
  border-radius: 16px;

  background: linear-gradient(
    180deg,
    rgba(2, 8, 18, 0.78),
    rgba(2, 8, 18, 0.6)
  );
  border: 1px solid rgba(255, 255, 255, 0.16);
  box-shadow:
    0 14px 36px rgba(0, 0, 0, 0.45),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

/* Title - only layout; color/gradient from global h2/title-aurora */
.sol-title {
  margin: 0 0 0.6em;
  font-size: clamp(2rem, 3.6vw, 2.8rem);
  line-height: 1.05;
  font-weight: 900;
  text-shadow: none !important;
}

/* Description */
.sol-desc {
  margin: 0;
  font-size: clamp(0.95rem, 1.8vw, 1.1rem);
  line-height: 1.7;
  max-width: 70ch;
  color: var(--body-muted);
  text-shadow: none !important;
}

/* ===== RIGHT VISUAL (no glass frame) ===== */
.sol-visual {
  position: relative;
  min-height: 420px;
  border-radius: 16px;
  overflow: hidden;
  background: transparent;
  border: none;
}

.sol-bg {
  position: absolute;
  inset: -12% -6% -6% -6%;
  background-size: cover;
  background-position: 50% 50%;
  transform-origin: 50% 45%;
  filter: saturate(1.05) contrast(1.06) brightness(0.92);
}

.kb {
  animation: sol-kb 18s ease-in-out infinite alternate;
}

@keyframes sol-kb {
  0% {
    transform: scale(1.06);
    background-position: 48% 52%;
  }
  50% {
    transform: scale(1.12);
    background-position: 52% 48%;
  }
  100% {
    transform: scale(1.15);
    background-position: 50% 50%;
  }
}

.sol-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(
      40rem 28rem at 70% 18%,
      rgba(126, 141, 254, 0.12),
      rgba(0, 0, 0, 0) 60%
    ),
    linear-gradient(
      180deg,
      rgba(0, 0, 0, 0.28),
      rgba(0, 0, 0, 0.55)
    );
}

/* ===== METEORS ===== */
.sol-meteors {
  position: absolute;
  inset: 0;
  pointer-events: none;
}
.sol-meteor {
  position: absolute;
  left: -22vw;
  width: 36vw;
  height: 2px;
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0),
    rgba(255, 255, 255, 0.9),
    rgba(255, 255, 255, 0)
  );
  transform: rotate(-16deg);
  filter: drop-shadow(0 0 6px rgba(255, 255, 255, 0.45));
  opacity: 0;
  animation: sol-meteorFly linear infinite;
}

@keyframes sol-meteorFly {
  0% {
    transform: translate3d(0, 0, 0) rotate(-16deg);
    opacity: 0;
  }
  8% {
    opacity: 0.95;
  }
  100% {
    transform: translate3d(130vw, -40vh, 0) rotate(-16deg);
    opacity: 0;
  }
}

/* ===== REVEAL ===== */
[data-reveal] {
  opacity: 0;
  transform: translateX(var(--from-x, 0)) translateY(var(--from-y, 14px));
  transition:
    opacity var(--reveal-dur, 0.55s)
      var(--reveal-ease, cubic-bezier(0.22, 0.61, 0.36, 1)),
    transform var(--reveal-dur, 0.55s)
      var(--reveal-ease, cubic-bezier(0.22, 0.61, 0.36, 1));
  transition-delay: var(--delay, 0ms);
  will-change: opacity, transform;
}

.is-in[data-reveal] {
  opacity: 1;
  transform: translateX(0) translateY(0);
}
.is-out[data-reveal] {
  opacity: 0;
  transform: translateX(0) translateY(18px);
}

/* ===== RESPONSIVE ===== */
@media (max-width: 980px) {
  .sol-grid {
    grid-template-columns: 1fr;
  }

  .sol-visual {
    min-height: 360px;
  }
}

/* ===== MOTION SAFETY ===== */
@media (prefers-reduced-motion: reduce) {
  .kb,
  .sol-meteor {
    animation: none !important;
  }

  [data-reveal] {
    transition: none !important;
    opacity: 1 !important;
    transform: none !important;
  }
}
